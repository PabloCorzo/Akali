{% extends "base.html" %}

{% block head %}
<title>Juegos</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
{% endblock %}

    {% block body %}
    {% if state.turn < 2%}
    <div class = 'blackjack-playing'>
    </div>
    {% elif state.get_winner() == 1 %}
    <div class = 'blackjack-win'>
    </div>
    {% elif state.get_winner() == -1 %}
    <div class = 'blackjack-loss'>
    </div>
    {% elif state.get_winner() == 0 %}
    <div class = 'blackjack-playing'>
    </div>
    {% endif %}

        {% if state %} 
    {% if state.turn < 2 %} 

    <div class = 'container-games'>
      <p> Tienes {{state.player_score()}}</p>
    </div>
    
    
    {% if state.turn == 0 %}
    <div class = 'container-games' style = 'margin-left: 1%;'>
    <a class="blackjack-btn" href="{{url_for('games.blackjack', action = '1')}}">PEDIR</a>
    <a  class="blackjack-btn" href="{{url_for('games.blackjack', action = '0')}}">PARAR</a>
    </div>

    
    <div class = 'container-games'>
      <p> La casa tiene {{state.dealer_score(hide = True)}}</p>
    </div>


    <div class = 'container-games' style = 'padding : 1%; align-items: center;'>
    {% for card in state.player_hand %}
    <p>{{card.name}}</p>
    {% endfor %}
    </div>

    <div class = 'container-games' style = 'margin-left: 33%;'>
      <p>  {{state.dealer_hand[0].name}}</p>
    </div>
    {% elif state.turn == 1 %}


      <div class = 'container-games' style = 'margin-left: 1%;'>
        <a  class="btn" href="{{url_for('games.blackjack', action = '3')}}">SEGUIR</a>
      </div>

      <div class = 'container-games' >
      <p> La casa tiene {{state.dealer_score()}}</p>
      </div>
    <div class = 'container-games' style = 'padding : 1%; align-items: center;'>
      {% for card in state.dealer_hand %}
      <p> {{card.name}}</p>
      
      {% endfor %}
      <p> dealer score is  {{state.dealer_score()}}</p>
    </div>
    {% endif %}
    
    
    {% else %}
    <div class = 'container-games' style = 'margin-left: 25%; padding: 1%; width: 50%; '>
      <form class="blackjack-box" style="height: 100%; width: 100%;" action = "{{url_for('games.blackjack', action = 'NEW')}}" method="post">
      <div class="form-group">
          <label for="password">Apuesta</label>
          <input type="number" id="bet" name="bet" placeholder="Aposto, seu pÃ£o-duro de merda" required min = '10'>
        </div>
      <button  class="btn" href="{{url_for('games.blackjack', action = 'NEW')}}" type="submit" style = 'height : 1%;' >NEW GAME</a>
      </form>
      
    </div>
    <div class = 'container-games' style = 'margin-left: 25%; padding: 1%; width: 50%; '>
      <p style = 'margin-left: 3%; margin-right: 1%; padding: 1%; margin-top: 3%;'>Your Score: {{state.player_score()}}</p>
      {% if state.get_winner() == 0 %}
      <p style = 'margin-top: 3%; margin-left: 25%;'> ITS A TIE</p>
      {% elif state.get_winner() == 1 %}
      <p style = 'margin-top: 3%; margin-left: 25%;'> YOU WIN</p>
      {% elif state.get_winner() == -1 %}    
      <p style = 'margin-top: 3%; margin-left: 25%;'> YOU  LOSE</p>
      {% endif %}
      <p style = 'margin-left: 1%; margin-right: 1%; padding: 1%; margin-top: 3%;'>Dealer Score: {{state.dealer_score()}}</p>
    </div>
    
    

    {% endif %}
    
    <script type = "text/javascript">
      
      // makes it so F5 doesn't actually send any parameters -> if you hit 1 time then refresh it hits a second time
      window.history.replaceState({}, document.title, "/" + "dashboard/blackjack")
 
    </script>
    
  {% endif %} 
    {% endblock %}

<body class="body-games">
  <div class="games-full">
    <div class="blackjack-box">
      <img src="{{url_for('static', filename='imagenes/casino_racoon.jpg')}}" alt="Black Jack" class="blackjack-img">
    </div>
  </div>
</body>
