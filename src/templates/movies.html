{% extends "base.html" %}

{% block head %}
<title>Películas</title>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
{% endblock %}

{% block body %}
<body class="body-hobby">

  <nav class="navbar">
    <a href="{{ url_for('create_hobby') }}">Hobbies</a>
    <a href="{{ url_for('movies') }}">Películas</a>
    <a href="{{ url_for('create_schedule_item') }}">Mi horario</a>
    <a href="{{ url_for('habitos') }}">Hábitos</a>
    <a href="{{ url_for('tasks') }}">Lista de tareas</a>
  </nav>

  <div class="container-hobby-all">

    <!-- Sección: Añadir nueva -->
    <div class="container-hobby">
      <h1>Películas</h1>
      <p>En este apartado puedes agregar tus películas.</p>

      <form action="{{ url_for('create_movie') }}" method="post">
        <div class="form-group">
          <label for="title">Título *</label>
          <input class="textbox" id="title" name="title" type="text" required>
        </div>

        <div class="form-group">
          <label for="director">Director</label>
          <input class="textbox" id="director" name="director" type="text">
        </div>

        <div class="form-group">
          <label for="actors">Actores</label>
          <input class="textbox" id="actors" name="actors" type="text">
        </div>

        <div class="form-group">
          <label for="synopsis">Sinopsis</label>
          <textarea class="textbox" id="synopsis" name="synopsis" rows="3"></textarea>
        </div>

        <button class="btn" type="submit">Guardar</button>
      </form>
    </div>

    <!-- Sección: Buscar / Filtrar -->
    <div class="container-hobby-search">
      <h1>Buscar Película</h1>
      <form action="{{ url_for('movies') }}" method="get">
        <div class="form-group">
          <label for="q_title">Título</label>
          <input class="textbox" id="q_title" name="title" type="text">
        </div>

        <div class="form-group">
          <label for="q_director">Director</label>
          <input class="textbox" id="q_director" name="director" type="text">
        </div>

        <div class="form-group">
          <label for="q_actor">Actor</label>
          <input class="textbox" id="q_actor" name="actor" type="text">
        </div>

        <button class="btn" type="submit">Buscar</button>
      </form>

      <!-- Resultados -->
      <h1>Resultados</h1>
      <table border="1" cellpadding="5" cellspacing="0">
        <thead>
          <tr>
            <th>ID</th>
            <th>Título</th>
            <th>Director</th>
            <th>Actores</th>
            <th>Sinopsis</th>
          </tr>
        </thead>
        <tbody>
          {% if movies is defined and movies|length %}
            {% for m in movies %}
            <tr>
              <td>{{ m.id }}</td>
              <td>{{ m.title }}</td>
              <td>{{ m.director or '-' }}</td>
              <td>{{ m.actors or '-' }}</td>
              <td>{{ m.synopsis or '-' }}</td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="5" style="text-align:center; color: gray;">Busca una película para ver resultados</td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>

  </div>
</body>
{% endblock %}


