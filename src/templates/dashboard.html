{% extends "base.html" %}

{% block head %}
    <title>Dashboard - AKALI</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
{% endblock %}

{% block body %}

    <div class="dashboard-wrapper">
        <!-- Header de Bienvenida -->
        <div class="dashboard-header">
            <h1>Bienvenido de vuelta</h1>
            <p>AquÃ­ tienes un resumen de tu dÃ­a</p>

    <div class="container">
        <!-- AÃ‘ADIR ESTO: Mensajes flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}" style="padding: 1rem; margin-bottom: 1rem; border-radius: 5px; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        <!-- FIN mensajes flash -->

        <div class="main-box">
            <h1>Bienvenido a AKALI</h1>
            <p style="margin: 15px; font-size: 1.2rem">Tu aplicaciÃ³n de productividad personal</p>
        </div>

        <!-- Grid Principal del Dashboard -->
        <div class="dashboard-grid">
            
            <!-- Widget 1: Eventos de Hoy -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2>Tu DÃ­a</h2>
                    <a href="{{ url_for('schedule.create_schedule_item') }}" class="card-link">Ver horario completo â†’</a>
                </div>
                <div class="card-content">
                    {% if events %}
                        <ul class="event-list">
                            {% for event in events %}
                                <li class="event-item">
                                    <span class="event-time">{{ event.start_time.strftime('%H:%M') }}</span>
                                    <span class="event-title">{{ event.title }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="empty-state">
                            <p>No hay eventos para hoy</p>
                            <small>Disfruta de tu tiempo libre</small>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Widget 2: Tareas Pendientes -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2>âœ“ PrÃ³ximas Tareas</h2>
                    <a href="{{ url_for('tasks.tasks') }}" class="card-link">Ver todas â†’</a>
                </div>
                <div class="card-content">
                    {% if tasks %}
                        <ul class="task-list">
                            {% for task in tasks %}
                                <li class="task-item">
                                    <span class="task-bullet">â€¢</span>
                                    <span class="task-name">{{ task.name }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="empty-state">
                            <p>Â¡Todo al dÃ­a!</p>
                            <small>No tienes tareas pendientes</small>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Widget 3: Mini Calendario Semanal -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2>ðŸ“† Esta Semana</h2>
                    <a href="{{ url_for('schedule.create_schedule_item') }}" class="card-link">Ver calendario â†’</a>
                </div>
                <div class="card-content">
                    <div class="mini-calendar">
                        {% for day in week_days %}
                            <div class="mini-day {% if day.is_today %}mini-day-today{% endif %}">
                                <div class="mini-day-header">
                                    <span class="mini-day-name">{{ day.day_name }}</span>
                                    <span class="mini-day-number">{{ day.day_number }}</span>
                                </div>
                                <div class="mini-day-content">
                                    {% if day.events_count > 0 %}
                                        <div class="mini-event-indicator">
                                            <span class="mini-count">{{ day.events_count }}</span>
                                        </div>
                                    {% else %}
                                        <span class="mini-empty">-</span>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Widget 4: Acciones RÃ¡pidas -->
            <div class="dashboard-card dashboard-card-wide">
                <div class="card-header">
                    <h2>Acciones RÃ¡pidas</h2>
                </div>
                <div class="card-content">
                    <div class="quick-actions-grid">
                        <a href="{{ url_for('tasks.tasks') }}" class="quick-action-btn">
                            <span>Nueva Tarea</span>
                        </a>
                        <a href="{{ url_for('activity.create_Activity') }}" class="quick-action-btn">
                            <span>Nueva Actividad</span>
                        </a>
                        <a href="{{ url_for('workout.workouts_new') }}" class="quick-action-btn">
                            <span>AÃ±adir Entrenamiento</span>
                        </a>
                        <a href="{{ url_for('nutrition.nutrition_new') }}" class="quick-action-btn">
                            <span>AÃ±adir comida</span>
                        </a>
                        <a href="{{ url_for('movies.movies') }}" class="quick-action-btn">
                            <span>Nueva PelÃ­cula</span>
                        </a>
                        <a href="{{ url_for('schedule.create_schedule_item') }}" class="quick-action-btn">
                            <span>Horario</span>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>
{% endblock %}